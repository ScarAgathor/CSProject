#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_FLIGHTS 100
#define MAX_STR_LEN 50

#define PRICE_PER_MILE 0.94

typedef struct {
    char destination[100];
    char typeOfFlight[100];
    int hrs;
    int miles;
    float price;
} Flight;

void addFlights(Flight flights[], int *num_flights);

//void getFlights(Flight flights[], int num_flights);//function for customers to see flights.

void searchFlights(Flight flights[], int num_flights);//function to search flights based on user input of destination.



int main() {
    
    Flight flights[MAX_FLIGHTS];
    int num_flights = 0;

    addFlights(flights, &num_flights);

    //getFlights(flights, num_flights);

    searchFlights(flights, num_flights);

    return 0;
}

void addFlights(Flight flights[], int *num_flights) {
    char destination[100];
    char typeOfFlight[100];
    int hrs;
    int miles;
    int price;
    char decision[5];

    do
    {
        printf("Enter destination: ");
        scanf("%s", destination);
        printf("Enter type of flight: ");
        scanf("%s", typeOfFlight);
        printf("Enter hrs: ");
        scanf("%d", &hrs);
        printf("Enter miles: ");
        scanf("%d", &miles);

        strcpy(flights[*num_flights].destination, destination); 
        strcpy(flights[*num_flights].typeOfFlight, typeOfFlight);
        flights[*num_flights].hrs = hrs;
        flights[*num_flights].miles = miles;
        price = flights[*num_flights].miles * PRICE_PER_MILE; 
        flights[*num_flights].price = price;
        (*num_flights)++;

        printf("\nDo you wish to add another flight: ");
        scanf("%s", decision);
    }   while (strcmp(decision, "yes") == 0);
        
    if(strcmp(decision, "yes") != 0) {
        printf("End of add flights function\n");
    }

}

/*void getFlights(Flight flights[], int num_flights) {
    for(int i = 0; i < num_flights; i++) {
            printf("\nFlight %d\n", i+1);
            printf("Destination: %s\n",flights[i].destination);
            printf("Type of Flight: %s\n",flights[i].typeOfFlight);
            printf("Hours of Flight: %d hours.\n",flights[i].hrs);
            printf("Miles of Flight: %d miles.\n",flights[i].miles);
            printf("Price of Flight: $%.2f\n",flights[i].price);
        }
}*/

void searchFlights(Flight flights[], int num_flights) {

    char userDest[10];
    char availableDest[10];

    printf("\nEnter your destination: ");
    scanf("%s", userDest);

    int num_found_flights = 0;

    Flight foundFlights[MAX_FLIGHTS];

    for(int i = 0; i < num_flights; i++) {
        strcpy(flights[i].destination, availableDest);
        if (strcmp(userDest, availableDest) == 0);
        {
            strcpy(foundFlights[num_found_flights].destination, flights[i].destination); 
            strcpy(foundFlights[num_found_flights].typeOfFlight, flights[i].typeOfFlight); 
            foundFlights[num_found_flights].hrs = flights[i].hrs;
            foundFlights[num_found_flights].miles = flights[i].miles;
            foundFlights[num_found_flights].price = flights[i].price;;

            //foundFlights[num_found_flights] = flights[i];
            num_found_flights++;
        }
    }

    for(int i = 0; i < num_found_flights; i++) {
        printf("\nFlight %d\n", i+1);
        printf("Destination: %s\n",foundFlights[i].destination);
        /*printf("Type of Flight: %s\n",foundFlights[i].typeOfFlight);
        printf("Hours of Flight: %d hours.\n",foundFlights[i].hrs);
        printf("Miles of Flight: %d miles.\n",foundFlights[i].miles);
        printf("Price of Flight: $%.2f\n",foundFlights[i].price);*/
    
    }
}
